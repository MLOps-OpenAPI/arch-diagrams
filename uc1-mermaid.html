<!DOCTYPE html>
<html>
<head>
  <title>Mermaid in HTML</title>
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ startOnLoad: true });
  </script>
</head>
<body>

  <h2>Flowchart Example</h2>
  <div class="mermaid">
    graph LR;

    %% Define the common flow items:
    %%A--> | Data Filtering | B--> | ??? | C
    A--> C
    B--> C
    subgraph Pipeline ["**Pipeline**"]
        
        %% Add an empty node to overcome some formatting issues
        subgraph invisibleSpace["<br/>"]

            %% Add the rest of the nodes
            subgraph Inputs ["**Inputs**"]
                C 
            end
            subgraph Events ["**Events**"]
                D
            end
            subgraph Outputs ["**Outputs**"]
                E
            end
        end
        C-->D
        %%C--> | test text | D
        D-->E
        %%D--> | test text | E
    end

    %% Now label and style the blocks
    %% Note: You could have done this above, but I find this to be cleaner and easier to manage

    A[Raw Data]
    style A fill:green

    B[Data Intake Form]
    style B fill:green

    C[Raw data, Data intake form]
    style C fill:green

    D((Data Product Intake))
    style D fill:orange

    E[Naming standard, raw data, data card]
    style E fill:blue

    %% Remove unnecessary box outlines
    style invisibleSpace stroke-width:0
    style Inputs stroke-width:0
    style Events stroke-width:0
    style Outputs stroke-width:0
  </div>

  <h2>Success path</h2>
  <ol>
    <li>
        Data intake form contents validated
    </li>
    <li>
        Initial data card created
    </li>
    <li>
        Data intake form contents moved into data card
    </li>
    <li>
        Raw data filename defined from data card contents + naming standard
    </li>
    <li>
        Raw data with correct filename uploaded to data environment
    </li>
  </ol>
  
<h2>Exceptions/Errors</h2>

<ol>
    <li>
        Data intake form incomplete
    </li>
    <li>
        Data card could not be created
    </li>
    <li>
        Data environment inaccessible
    </li>
</ol>

  <h2>Policy: Handle of skipping data intake</h2>
  <table border="1">
      <tr>
        <th>Code</th>
        <th>Code Text</th>
        <th>Message</th>
      </tr>
      <tr>
        <td>204</td>
        <td>No content</td>
        <td>Data intake skipped as requested</td>
      </tr>
  </table>
</body>
</html>